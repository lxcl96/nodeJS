# 0.nodeJså¼•å…¥

## 1.JavaScriptåœ¨æµè§ˆå™¨å’ŒnodeJSä¸­çš„åŒºåˆ«

### 1.åº•å±‚æ¶æ„

<img src='img/image-20230320132224540.png' style='zoom:50%'>

<img src='img/image-20230320132347395.png' style='zoom:50%'>

***ä»¥ä¸‹APIå‡ä¸å¯å†ç”¨ï¼š***

+ `window`
+ `history`
+ `navigator`
+ `location`
+ `ajax`
+ ...

***å¯ç”¨çš„å…¬å…±APIï¼š***

+ `console`
+ `å®šæ—¶å™¨`
  ```javascript
  setTimeout(()=>{
      console.log("å»¶è¿Ÿ1ç§’");
  },1000);
  
  setInterval(()=>{
      console.log("é—´éš”1sï¼Œå¾ªç¯ä¸‹å»")
  },1000);
  
  ```

### 2.é¡¶çº§å¯¹è±¡ä¸åŒ

 + æµè§ˆå™¨ä¸­é¡¶çº§å¯¹è±¡ï¼š`window`
 + nodeJsä¸­é¡¶çº§å¯¹è±¡ï¼š`global` (å¿…é¡»å°å†™)ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨`globalThis`æŒ‡å‘`global`(ES2020å¼•å…¥çš„è§„èŒƒ)

## 2. Node.jsä¸­ä½¿ç”¨æ¨¡ç‰ˆå­—ç¬¦ä¸²

```javascript
//æ­£å¸¸å­—ç¬¦ä¸²
let str1 = __dirname+"a.txt";
let str2 = __dirname+'\a.txt';
//æ¨¡ç‰ˆå­—ç¬¦ä¸²  ç”¨åå¼•å·``å–å˜é‡çš„å€¼
let str3=`${__dirname}\a.txt`;
```

## 3.Node.jsç½‘å€

APIï¼šhttps://nodejs.org/zh-cn/docs

æ’ä»¶åº“ï¼šhttps://www.npmjs.com/



# 1.Bufferï¼ˆç¼“å†²å™¨ï¼‰

## 1.æ¦‚å¿µ 

Buffer æ˜¯ä¸€ä¸ªç±»ä¼¼äºæ•°ç»„çš„ å¯¹è±¡ ï¼Œç”¨äºè¡¨ç¤º**å›ºå®šé•¿åº¦çš„å­—èŠ‚åºåˆ—**ã€‚

Buffer æœ¬è´¨æ˜¯ä¸€æ®µå†…å­˜ç©ºé—´ï¼Œä¸“é—¨ç”¨æ¥å¤„ç† äºŒè¿›åˆ¶æ•°æ® ã€‚

<img src='img\nodeJSç¬”è®°\image-20230320151735339.png'>

## 2.ç‰¹ç‚¹

+ Bufferå¤§å°å›ºå®šä¸”æ— æ³•è°ƒæ•´
+ Bufferæ€§èƒ½è¾ƒå¥½ï¼Œå¯ä»¥ç›´æ¥å¯¹è®¡ç®—æœºå†…å­˜è¿›è¡Œæ“ä½œ
+ æ¯ä¸ªå…ƒç´ çš„å¤§å°ä¸º1å­—èŠ‚ï¼ˆbyte 8ä½ï¼‰

<img src='img\nodeJSç¬”è®°\image-20230320151920914.png'>

## 3.ä½¿ç”¨

**Bufferæ•´ä½“è¾“å‡ºé»˜è®¤æ˜¯16è¿›åˆ¶ï¼Œå•ç‹¬è¾“å‡ºé»˜è®¤æ˜¯10è¿›åˆ¶**

### 3.1 Node.jsä¸­åˆ›å»ºBufferçš„ä¸‰ç§æ–¹å¼ï¼š

ä¸‹é¢ä¸‰ç§æ–¹å¼ï¼Œè¾“å‡ºéƒ½æ˜¯Unicodeæ ¼å¼ï¼Œ16è¿›åˆ¶è¡¨ç¤ºçš„ï¼ˆUnicodeå…¼å®¹ASCIIï¼Œæ‰€ä»¥éƒ¨åˆ†ä¸€æ ·ï¼‰

+ `Buffer.alloc(10)`

  ```javascript
  //åœ¨å†…å­˜ä¸­åˆ†é…æŒ‡å®šé•¿åº¦çš„Bufferï¼Œå¹¶å¯¹å…¶è¿›è¡Œç½®0ï¼Œ10å°±è¡¨ç¤º10ä¸ªå­—èŠ‚ï¼Œ1ä¸ªå­—èŠ‚8ä½
  let buf_1 = Buffer.alloc(10);
  console.log(buf_1);//è¾“å‡º <Buffer 00 00 00 00 00 00 00 00 00 00>
  ```

+ `BUffer.allocUnsafe(10000)`

  ```javascript
  //å’Œä¸Šé¢ä¸åŒçš„æ˜¯ï¼Œä¸å¯¹å†…å­˜è¿›è¡Œç½®0æ“ä½œï¼Œæ‰€ä»¥å¯èƒ½ä¼šæœ‰è„æ•°æ®ï¼Œä¼˜ç‚¹ï¼šæ¯”ä¸Šé¢çš„å¿«ï¼ˆä¸ç½®é›¶ï¼‰
  let buf_2 = Buffer.allocUnsafe(10000);
  console.log(buf_2);ã€
  //è¾“å‡º<Buffer 80 00 30 03 00 00 00 00 a0 63 2e 03 00 00 00 00 00 20 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ff ff ... 9950 more bytes>
  ```

+ `Buffer.from("hello")`ï¼Œå¯ä»¥å°†**å­—ç¬¦ä¸²**æˆ–è€…**åè¿›åˆ¶çš„æ•°å­—æ•°ç»„**è½¬æˆBuffer

  ```javascript
  let buf_3 = Buffer.from("hello");
  //h-å¯¹åº”asciiçš„åè¿›åˆ¶ 104- å¯¹åº”16è¿›åˆ¶çš„ 68
  console.log(buf_3);//è¾“å‡º<Buffer 68 65 6c 6c 6f>
  let buf_4 = Buffer.from(['h','e','l','l','o',0]);
  console.log(buf_4);//è¾“å‡º<Buffer 00 00 00 00 00 00>ï¼Œå› ä¸ºåªæ¥å—æ•°å­—æ•°ç»„
  let buf_5 = Buffer.from([104,101,108,108,111]);
  console.log(buf_5.toString());//è¾“å‡ºhello
  ```

### 3.2 Bufferä¸å­—ç¬¦ä¸²çš„ç›¸äº’è½¬æ¢

+ Bufferæ•´ä½“è½¬å­—ç¬¦ä¸²ï¼Œé»˜è®¤é‡‡ç”¨utf8ç¼–ç 

  ```javascript
  let buf_5 = Buffer.from([104,101,108,108,111]);
  console.log(buf_5.toString());//è¾“å‡ºhello
  ```

  > [Node.jsæ”¯æŒçš„å­—ç¬¦ç¼–ç ï¼šascii,utf8,utf16le,ucs2,base64,latin1,binary,hex](https://www.runoob.com/nodejs/nodejs-buffer.html)

+ å­—ç¬¦ä¸²è½¬Buffer

  ```javascript
  let buf_3 = Buffer.from("hello");
  console.log(buf_3);//è¾“å‡º<Buffer 68 65 6c 6c 6f>
  ```

  ### 3.3 Biufferçš„è¯»å†™

  ç”±äºBufferç±»ä¼¼äºæ•°ç»„ï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨ä¸‹æ ‡è¿›è¡Œè¯»å†™

  + Bufferå•å­—èŠ‚è¯»

    ```javascript
    let buf_6 = Buffer.from("hello");
    console.log(buf_6[0]);//é»˜è®¤åè¿›åˆ¶  104
    //æ³¨æ„è¿™é‡Œçš„å•ä¸ªbufferå­—èŠ‚çš„toString()ä»£è¡¨çš„æ˜¯è¿›åˆ¶è½¬æ¢ï¼Œé»˜è®¤å°±æ˜¯åè¿›åˆ¶
    console.log(buf_6[0].toString(2))//è½¬æˆ2è¿›åˆ¶ 1101000
    console.log(buf_6[0].toString(16))//è½¬æˆ16è¿›åˆ¶ 68
    ```

  + Bufferå•å­—èŠ‚å†™

    ```javascript
    let buf_6 = Buffer.from("hello");
    buf_6[0]=99;
    console.log(buf_6);//<Buffer 63 65 6c 6c 6f>
    console.log(buf_6.toString());//cello
    ```

  + Bufferæº¢å‡º

    å› ä¸ºBufferä¸­1ä¸ªå­—èŠ‚æ˜¯8ä½ï¼Œæ‰€ä»¥å•ä¸ªå­—èŠ‚æœ€å¤§å¯è¡¨ç¤ºçš„æ•°å­—ä¸º2^8-1=255ä¸ªï¼Œå¦‚æœèµ‹å€¼è¶…è¿‡è¿™ä¸ªé™åˆ¶ï¼Œå°±æ˜¯æŠŠ**è¶…è¿‡8ä½çš„æ•°æ®è¿›è¡Œèˆå¼ƒ**ã€‚

    ```javascript
    let buf_6 = Buffer.from("hello");
    //å¤§äº255
    buf_6[0]=555;//555çš„äºŒè¿›åˆ¶ä¸ºï¼š10 0010 1011,é‚£ä¹ˆèˆå¼ƒåå°±æ˜¯0010 1011,å¯¹åº”åè¿›åˆ¶43
    console.log(buf_6[0]);
    ```

    ### 3.3 Bufferå­˜å‚¨ä¸­æ–‡

    utf8æ ¼å¼ä¸‹ï¼Œ1ä¸ªä¸­æ–‡å­—ç¬¦å ç”¨3ä¸ªå­—èŠ‚

    ```javascript
    let buf_7=Buffer.from("ä½ å¥½");//6ä½unicode 16è¿›åˆ¶
    console.log(buf_7);//<Buffer e4 bd a0 e5 a5 bd>
    ```

# 2 fs

fs å…¨ç§°ä¸º file system ï¼Œç§°ä¹‹ä¸º æ–‡ä»¶ç³»ç»Ÿ ï¼Œæ˜¯ Node.js ä¸­çš„ å†…ç½®æ¨¡å— ï¼Œå¯ä»¥å¯¹è®¡ç®—æœºä¸­çš„ç£ç›˜è¿›è¡Œæ“
ä½œã€‚å…¶ä¸»è¦ä½œç”¨å¦‚ä¸‹ï¼š

+ æ–‡ä»¶å†™å…¥
+ æ–‡ä»¶è¯»å–
+ æ–‡ä»¶ç§»åŠ¨ä¸é‡å‘½å
+ æ–‡ä»¶åˆ é™¤
+ æ–‡ä»¶å¤¹æ“ä½œ
+ æŸ¥çœ‹èµ„æºçŠ¶æ€

## 1. æ–‡ä»¶å†™å…¥

æ–‡ä»¶å†™å…¥å°±æ˜¯å°† æ•°æ® ä¿å­˜åˆ° æ–‡ä»¶ ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‡ ä¸ªæ–¹æ³•æ¥å®ç°è¯¥æ•ˆæœï¼š

| æ–¹æ³•              | è¯´æ˜         |
| ----------------- | ------------ |
| writeFile         | å¼‚æ­¥è¦†ç›–å†™å…¥ |
| writeFileSync     | åŒæ­¥è¦†ç›–å†™å…¥ |
| appendFile        | å¼‚æ­¥è¿½åŠ      |
| appendFileSync    | åŒæ­¥è¿½åŠ      |
| createWriteStream | æµå¤±å†™å…¥     |

> **æ³¨ï¼š**è¿™é‡Œçš„åŒæ­¥å¼‚æ­¥çš„æ„æ€å°±æ˜¯ï¼Œè„šæœ¬æ‰§è¡Œåˆ°è¿™é‡Œ
>
> + åŒæ­¥ï¼Œç­‰å¾…æ–‡ä»¶æ“ä½œå®Œæ‰ä¼šæ‰§è¡Œä¸‹é¢çš„ä»£ç 
> + å¼‚æ­¥ï¼Œå°†æ–‡ä»¶æ“ä½œäº¤å¦å¤–ä¸€ä¸ªçº¿ç¨‹,**å›è°ƒå‡½æ•°å°±ä¼šæ’åœ¨ä¸»çº¿ç¨‹çš„æœ€å**ï¼Œç»§ç»­æ‰§è¡Œä¸‹é¢ä»£ç ï¼Œç›´åˆ°ä¸»çº¿ç¨‹è„šæœ¬æ‰§è¡Œå®Œï¼ŒæŒ‰ç…§é˜Ÿåˆ—é¡ºåºæ‰§è¡Œå¼‚æ­¥å›è°ƒå‡½æ•°

### 1.1 writeFile å¼‚æ­¥å†™å…¥

è¯­æ³•ï¼š `fs.writeFile(file, data[, options], callback)`

å‚æ•°è¯´æ˜ï¼š

+ `file` æ–‡ä»¶å
+ `data` å¾…å†™å…¥çš„æ•°æ®
+ `options` é€‰é¡¹è®¾ç½® ï¼ˆå¯é€‰ï¼‰åŒ…å« {encoding, mode, flag}ã€‚é»˜è®¤ç¼–ç ä¸º utf8, æ¨¡å¼ä¸º 0666 ï¼Œ flag ä¸º 'w'
+ `callback` å†™å…¥å›è°ƒï¼Œå¦‚æœæœ‰é”™è¯¯ï¼Œè¿”å›å‚æ•°å¿…æ˜¯err

è¿”å›å€¼ï¼š `undefined`

 ä»£ç ç¤ºä¾‹ï¼š

```javascript
const fs = require('fs');//å¯¼å…¥Node.jsåº•å±‚æ–‡ä»¶ï¼Œfs.js
fs.writeFile('./ä½ å¥½.txt','ä½ å¥½ï¼Œhello',{flag:w},err => {
    //å›è°ƒå‡½æ•°ï¼Œæ— è®ºæ˜¯å¦æˆåŠŸéƒ½ä¼šè°ƒç”¨ï¼Œå¦‚æœå¤±è´¥å¼‚å¸¸å†™å…¥err
    if(err) {
        console.log(err);
        return;
    }
    console.log("æ–‡ä»¶å†™å…¥æˆåŠŸï¼");
});

setTimeout(() => {
    console.log("ç­‰å¾…3s"); //è¿™ä¸ªä¹Ÿæ˜¯å¼‚æ­¥å›è°ƒ
},3000);// è¿™ä¸ªæ˜¯ä¸»çº¿ç¨‹ç­‰å¾…3ç§’
console.log("ç¨‹åºç»“æŸï¼");

/*
æœ€åè¾“å‡ºï¼š
	ç¨‹åºç»“æŸï¼ï¼ˆä¸»ç¨‹åºç»“å°¾ï¼‰
	æ–‡ä»¶å†™å…¥æˆåŠŸï¼ï¼ˆå¼‚æ­¥å›è°ƒè¿”å›é˜Ÿåˆ—ï¼‰
	ç­‰å¾…3s  ï¼ˆå¼‚æ­¥å›è°ƒè¿”å›é˜Ÿåˆ—ï¼‰
*/
```

### 1.2 writeFileSync åŒæ­¥å†™å…¥

è¯­æ³•: `fs.writeFileSync(file, data[, options])`

å‚æ•°è·Ÿ`writeFile()`å¤§ä½“ä¸€è‡´ï¼Œåªæ˜¯æ²¡æœ‰callbackå‚æ•°

è¿”å›å€¼ï¼š`undifined`

ä»£ç å®ä¾‹ï¼š

```javascript
const fs = require('fs');
try{
    fs.writeFileSync('./ä½ å¥½.txt','ä½ å¥½ï¼Œhello9999',{flag:w});
}catch(e){
    console.log(e);
}
setTimeout(() => {
    console.log("ç­‰å¾…3s"); //å¼‚æ­¥
},3000);
console.log("ç¨‹åºç»“æŸï¼");
```

### 1.3 appendFile[Sync] è¿½åŠ å†™å…¥

appendFile ä½œç”¨æ˜¯åœ¨æ–‡ä»¶å°¾éƒ¨è¿½åŠ å†…å®¹ï¼ŒappendFile è¯­æ³•ä¸ writeFile è¯­æ³•å®Œå…¨ç›¸åŒã€‚

è¯­æ³•ï¼š

+ `fs.appendFile(file, data[, options], callback)` å¼‚æ­¥å†™å…¥
+ `fs.appendFileSync(file, data[, options])` åŒæ­¥è¿½åŠ 

ä»£ç å®ä¾‹ï¼š

```javascript
const fs = require('fs');
fs.appendFile("./ä½ å¥½.txt","\r\nhelloï¼Œä½ å¥½ï¼",err => {
    if(err) {
        console.log(err);
        return;
    }
    console.log("è¿½åŠ æˆåŠŸï¼");
})
console.log("ç¨‹åºç»“æŸï¼");
/*
å¼‚æ­¥è¿½åŠ è¾“å‡ºï¼š
ç¨‹åºç»“æŸï¼
è¿½åŠ æˆåŠŸï¼
*/

fs.appendFileSync("./ä½ å¥½.txt","\r\nohayo,...");
console.log('ç¨‹åºç»“æŸ');
/*
åŒæ­¥è¿½åŠ è¾“å‡ºï¼š
ç¨‹åºç»“æŸï¼
*/
```

### 1.4 createWriteStream æµå¼å†™å…¥

è¯­æ³•ï¼š

`let ws=fs.createWriteStream(path[, options])`

å‚æ•°ï¼š

+ pathï¼šæ–‡ä»¶è·¯å¾„
+ options å¯é€‰é…ç½®

è¿”å›å€¼ï¼š`Object`

ä»£ç ç¤ºä¾‹ï¼š

```javascript
const fs = require('fs');
//é€‚åˆé¢‘ç¹å†™å…¥å’Œå¤§æ–‡ä»¶ï¼Œå›¾ç‰‡è§†é¢‘ç­‰
let ws = fs.createWriteStream('./å„¿æ­Œ.txt');
ws.write("ä¸€äºŒä¸‰å››äº”ï¼Œ");
ws.write("ä¸Šå±±æ‰“è€è™ã€‚");
ws.write("è€è™æ²¡æ‰“åˆ°ï¼Œ");
ws.write("æ‰“åˆ°ä¸€åªå°æ¾é¼ ã€‚");
ws.close();
```

> ç¨‹åºæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æ˜¯éœ€è¦æ¶ˆè€—èµ„æºçš„ ï¼Œæµå¼å†™å…¥å¯ä»¥å‡å°‘æ‰“å¼€å…³é—­æ–‡ä»¶çš„æ¬¡æ•°ã€‚
> æµå¼å†™å…¥æ–¹å¼é€‚ç”¨äº å¤§æ–‡ä»¶å†™å…¥æˆ–è€…é¢‘ç¹å†™å…¥ çš„åœºæ™¯, writeFile é€‚åˆäº å†™å…¥é¢‘ç‡è¾ƒä½çš„åœºæ™¯

### 1.5  å†™å…¥æ–‡ä»¶çš„åœºæ™¯

å½“ éœ€è¦æŒä¹…åŒ–ä¿å­˜æ•°æ® çš„æ—¶å€™ï¼Œåº”è¯¥æƒ³åˆ° æ–‡ä»¶å†™å…¥

+ ä¸‹è½½æ–‡ä»¶
+ å®‰è£…è½¯ä»¶
+ ä¿å­˜æ—¥å¿—
+ ç¼–è¾‘æ–‡ä»¶
+ è§†é¢‘å½•åˆ¶
+ ...

## 2. æ–‡ä»¶è¯»å–

æ–‡ä»¶è¯»å–é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯é€šè¿‡ç¨‹åºä»æ–‡ä»¶ä¸­å–å‡ºå…¶ä¸­çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‡ ç§æ–¹å¼ï¼š

| æ–¹æ³•             | è¯´æ˜     |
| ---------------- | -------- |
| readFile         | å¼‚æ­¥è¯»å– |
| readFileSync     | åŒæ­¥è¯»å– |
| createReadStream | æµå¼è¯»å– |

### 1. readFile å¼‚æ­¥è¯»å–

è¯­æ³•ï¼š

` fs.readFile(path[, options], callback)`

å‚æ•°è¯´æ˜ï¼š

+ path æ–‡ä»¶è·¯å¾„
+ options é€‰é¡¹é…ç½®
+ callback å›è°ƒå‡½æ•°

è¿”å›å€¼ï¼š`udefined`

ä»£ç ç¤ºä¾‹ï¼š

```javascript
const fs=require('fs');
fs.readFile("./å„¿æ­Œ.txt",(err, data) => {
    if(err) {
        console.log(err);
        return;
    }
    //è¿”å›çš„æ•°æ®ä¸ºBufferç±»å‹
    console.log(data.toString());
});
```

### 2. readFileSync åŒæ­¥è¯»å–

è¯­æ³•ï¼š 

`fs.readFileSync(path[, options])`

å‚æ•°è¯´æ˜ï¼š

+ path æ–‡ä»¶è·¯å¾„
+ options é€‰é¡¹é…ç½®

è¿”å›å€¼ï¼š`string|Buffer`

ä»£ç ç¤ºä¾‹ï¼š

```javascript
let content=fs.readFileSync("./å„¿æ­Œ.txt");
let content1=fs.readFileSync("./å„¿æ­Œ.txt",{encoding:'utf8'});
console.log(content.toString());
console.log(content1);
```

### 3. createReadStreamæµå¼è¯»å–

æ¯æ¬¡æœ€å¤§è¯»å–64KBå¤§å°æ•°æ®ï¼Œç†è®ºä¸Šå ç”¨64KBï¼Œä½†æ˜¯å®é™…è¯»å–æ¯”å†™å…¥çš„å¿«ï¼Œæ‰€ä»¥è‚¯å®šæ˜¯å¤§äº64KBçš„ã€‚

è¯­æ³•ï¼š

` fs.createReadStream(path[, options])`

å‚æ•°ï¼š

+ path æ–‡ä»¶è·¯å¾„
+ options é€‰é¡¹é…ç½®

è¿”å›å€¼ï¼š`Object`

```javascript
const fs=require('fs');
let rs=fs.createReadStream("C:\\Users\\Administrator\\Pictures\\a.jpg");
let size = 0;
//éœ€è¦ç»™è¯»å–æµç»‘å®šä¸€ä¸ª on dataäº‹ä»¶
rs.on('data', chunk => {
    //console.log(chunk.length);//65536 æœ€å¤§ä¸€æ¬¡å¯è¯»å»64kbå—,
    size += chunk.length;
    //è¯»ä¸€æ¬¡64kbæ•°æ®ï¼Œè°ƒç”¨å›è°ƒå‡½æ•°ï¼Œç»§ç»­è¯»å–ï¼Œè°ƒç”¨å›è°ƒï¼Œ...ç›´åˆ°è¯»å–å®Œæˆ
});
//å¯é€‰çš„ on endäº‹ä»¶ï¼Œä»£è¡¨è¯»å–æ–‡ä»¶æˆåŠŸ
rs.on('end',() =>{
    console.log("å›¾ç‰‡è¯»å–æˆåŠŸ, å…±" + size + "å­—èŠ‚");
});
```

## 3. æ–‡ä»¶ç§»åŠ¨ä¸é‡å‘½å

åœ¨ Node.js ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `rename` æˆ– `renameSync` æ¥ç§»åŠ¨æˆ–é‡å‘½å æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹

è¯­æ³•ï¼š

+ `fs.rename(oldPath, newPath, callback)`
+ `fs.renameSync(oldPath, newPath)`

å‚æ•°ï¼š

+ `oldPath` æºè·¯å¾„
+ `newPath` æ–°è·¯å¾„
+ `callback`å›è°ƒå‡½æ•°ï¼Œåªæœ‰ä¸€ä¸ªå½¢å‚err

## 4. æ–‡ä»¶åˆ é™¤

åœ¨ Node.js ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ unlink æˆ– unlinkSync æ¥åˆ é™¤æ–‡ä»¶

è¯­æ³•ï¼š

+ `fs.unlink(path, callback)`
+ `fs.unlinkSync(path)`
+ `fs.rm(path,callback)` node14.4å¼•å…¥
+ `fs.rmSync(path)` node14.4å¼•å…¥

å‚æ•°è¯´æ˜ï¼š

+ path æ–‡ä»¶è·¯å¾„
+ callback æ“ä½œåçš„å›è°ƒï¼Œåªæœ‰ä¸€ä¸ªerrå½¢å‚

ä»£ç ç¤ºä¾‹ï¼š

```javascript
const fs = require('fs');
fs.unlink('a.jpg',err => {
    if (err) {
        console.log(err);
        return;
    }
    console.log("åˆ é™¤æˆåŠŸ");
});

fs.rm("ä½ å¥½.txt",err => {
    if (err) {
        console.log(err);
        return;
    }
    console.log("åˆ é™¤æˆåŠŸ");
});
```

## 5. æ–‡ä»¶å¤¹æ“ä½œ

å€ŸåŠ© Node.js çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ–‡ä»¶å¤¹è¿›è¡Œ åˆ›å»º ã€ è¯»å– ã€ åˆ é™¤ ç­‰æ“ä½œ

| æ–¹æ³•                | è¯´æ˜              |
| ------------------- | ----------------- |
| mkdir/mkdirSync     | å¼‚/åŒæ­¥åˆ›å»ºæ–‡ä»¶å¤¹ |
| readdir/readdirSync | å¼‚/åŒæ­¥è¯»å–æ–‡ä»¶å¤¹ |
| rmdir/rmdirSync     | å¼‚/åŒæ­¥åˆ é™¤æ–‡ä»¶å¤¹ |

### 1. mkdir åˆ›å»ºæ–‡ä»¶å¤¹

åœ¨ Node.js ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ mkdir æˆ– mkdirSync æ¥åˆ›å»ºæ–‡ä»¶å¤¹

è¯­æ³•ï¼š

+ `fs.mkdir(path[, options], callback)`
+ `fs.mkdirSync(path[, options])`

å‚æ•°ï¼š

+ path æ–‡ä»¶å¤¹è·¯å¾„

+ options å¯é€‰æ“ä½œ

  > - **recursive** - æ˜¯å¦ä»¥é€’å½’çš„æ–¹å¼åˆ›å»ºç›®å½•ï¼Œé»˜è®¤ä¸º falseã€‚
  > - **mode** - è®¾ç½®ç›®å½•æƒé™ï¼Œé»˜è®¤ä¸º 0777ã€‚

+ callback å›è°ƒå‡½æ•°ï¼Œåªæœ‰errä¸€ä¸ªå½¢å‚

ä»£ç ç¤ºä¾‹ï¼š

```javascript
const fs=require('fs');
fs.mkdir("./html",err=>{});//å•ç›®å½•åˆ›å»º
fs.mkdir("./a/b/c/d",{recursive:true},err=>{});//é€’å½’åˆ›å»ºæ–‡ä»¶å¤¹
```

### 2. readdir è¯»å–æ–‡ä»¶å¤¹

**æŠŠåå­—è¯»å–åˆ°ï¼Œä¸è¯»å–å…¶å­ç›®å½•ï¼ˆå¦‚æœ‰ï¼‰**

è¯­æ³•ï¼š

+ `fs.readdir(path[, options], callback)`
+ `fs.readdirSync(path[, options])`

å‚æ•°ï¼š

+ path æ–‡ä»¶å¤¹è·¯å¾„
+ options å¯é€‰æ“ä½œï¼ˆç¼–ç ã€æ–‡ä»¶ç±»å‹ç­‰ï¼‰
+ callback å›è°ƒå‡½æ•°ï¼Œæœ‰errå’Œdataä¸¤ä¸ªå½¢å‚

ä»£ç ç¤ºä¾‹ï¼š

```javascript
const fs=require('fs');
fs.readdir('./',(err,data) => {
    if (err) {
        console.log(err);
        return;
    }
    console.log(data);//æ–‡ä»¶å¸¦åç¼€ï¼Œç›®å½•å°±åªè¯»å–è¿™ä¸€å±‚
})
```

### 3. rmdir åˆ é™¤æ–‡ä»¶å¤¹

åœ¨ Node.js ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `rmdir` ã€ `rmdirSync `æˆ–`rm (å¸¦é€’å½’flag)`ã€`rmSync (å¸¦é€’å½’flag)`æ¥åˆ é™¤æ–‡ä»¶å¤¹

è¯­æ³•ï¼š

+ `fs.rmdir(path[, options], callback)`
+ `fs.rmdirSync(path[, options])`
+ `fs.rm(path, {recursive:true,..}, callback)`
+ `fs.rmSync(path, {recursive:true,..})`

å‚æ•°è¯´æ˜ï¼š

+ path æ–‡ä»¶å¤¹è·¯å¾„
+ options é€‰é¡¹é…ç½®ï¼ˆ å¯é€‰ å¦‚é‡è¯•æ¬¡æ•°ï¼Œé‡è¯•é—´éš”æ—¶é—´ï¼Œæ˜¯å¦é€’å½’åˆ é™¤ç­‰å¾…ï¼‰
+ callback æ“ä½œåçš„å›è°ƒ åªæœ‰errä¸€ä¸ªå½¢å‚

è¿”å›å€¼ï¼š`undefined`

ä»£ç æ¼”ç¤ºï¼š

```javascript
//1
fs.rmdir('./html',err=>{
    if(err){
        console.log(err);
    }
});//åªåˆ é™¤å•å±‚ç©ºç›®å½•ï¼Œè‹¥éç©ºä¼šæŠ¥é”™
//2 Deprecate ä¸æ¨è
fs.rmdir('./html',{recursive:true},err=>{
    if(err){
        console.log(err);
    }
});//å¯é€’å½’åˆ é™¤ç›®å½•ï¼Œä¸ç®¡é‡Œé¢æ˜¯å¦æœ‰æ–‡ä»¶
//3 rmåˆ é™¤æ–‡ä»¶å¤¹å¿…é¡»å¸¦é€’å½’åˆ é™¤æ ‡è¯†ï¼Œå¦åˆ™ä¼šæŠ¥é”™
fs.rm('./a',{recursive:true},err=>{
    if (err) {
        console.log(err);
    }
})

```

## 6. æŸ¥çœ‹æ–‡ä»¶/æ–‡ä»¶å¤¹çŠ¶æ€ä¿¡æ¯

åœ¨ Node.js ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `stat`æˆ– `statSync`æ¥æŸ¥çœ‹èµ„æºï¼ˆæ–‡ä»¶æˆ–ç›®å½•ï¼‰çš„è¯¦ç»†ä¿¡æ¯

è¯­æ³•ï¼š

+ `fs.stat(path[, options], callback)`
+ `fs.statSync(path[, options])`

å‚æ•°ï¼š

+ path æ–‡ä»¶è·¯å¾„
+ options å¯é€‰é…ç½®
+ callback å›è°ƒå‡½æ•°ï¼Œæœ‰errå’Œstatä¸¤ä¸ªå½¢å‚

è¿”å›å€¼ï¼švoid

ä»£ç ç¤ºä¾‹ï¼š

```javascript
const fs=require('fs');
fs.stat('./fs-stat.js',(err,stat)=>{
    if(err) {
        console.log(err);
        return;
    }
    console.log(stat);
    console.log(stat.isFile());//æ˜¯å¦ä¸ºæ–‡ä»¶
    console.log(stat.isDirectory());//æ˜¯å¦ä¸ºç›®å½•  ã€ç­‰ç­‰ã€‚ã€‚å—è®¾å¤‡ï¼Œfifoï¼Œsocketç­‰ç­‰ã€‘
}
        
/* è¾“å‡º
Stats {
  dev: 4100191142,
  mode: 33206,
  nlink: 1,
  uid: 0,
  gid: 0,
  rdev: 0,
  blksize: 4096,
  ino: 3940649674145708,
  size: 311,//æ–‡ä»¶å¤§å°
  blocks: 0,
  atimeMs: 1679383161123.4019,
  mtimeMs: 1679383425918.4019,
  ctimeMs: 1679383425918.4019,
  birthtimeMs: 1679383161123.4019,
  atime: 2023-03-21T07:19:21.123Z,//æœ€åä¸€æ¬¡è®¿é—®æ—¶é—´
  mtime: 2023-03-21T07:23:45.918Z,//æœ€åä¸€æ¬¡ä¿®æ”¹æ–‡ä»¶å†…å®¹æ—¶é—´
  ctime: 2023-03-21T07:23:45.918Z,//æœ€åä¸€æ¬¡ä¿®æ”¹æ–‡ä»¶çŠ¶æ€æ—¶é—´
  birthtime: 2023-03-21T07:19:21.123Z//åˆ›å»ºæ—¶é—´
}
true//æ˜¯æ–‡ä»¶
false//ä¸æ˜¯ç›®å½•

*/
```

## 7. ç›¸å¯¹è·¯å¾„é—®é¢˜

å’Œåˆ«çš„åœ°æ–¹ä¸€æ ·

ç¨‹åºåœ¨å“ªä¸ªåœ°æ–¹è¿è¡Œï¼Œå“ªä¸ªç›®å½•å°±æ˜¯ . (å½“å‰ç›®å½•)ã€‚

æ‰€ä»¥è¦æ³¨æ„ç¨‹åºçš„è¿è¡Œä½ç½®ï¼Œé˜²æ­¢ç›¸å¯¹è·¯å¾„ä¸‹äº§ç”Ÿçš„æ–‡ä»¶ä¸åœ¨é¢„æƒ³çš„ä½ç½®ã€‚

## 8. __dirname

å¯ä»¥ç†è§£ä¸ºå’Œrequireä¸€æ ·çš„å…¨å±€å˜é‡ï¼Œä½†æ˜¯å®é™…ä¸Šå¹¶ä¸æ˜¯ã€‚

__dirnameå§‹ç»ˆä¿å­˜çš„æ˜¯å½“å‰è¿è¡Œè„šæœ¬çš„ç»å¯¹è·¯å¾„ï¼Œå°±å¯ä»¥é¿å…7ä¸­ï¼Œè¿è¡Œç›®å½•ä¸åŒå¯¼è‡´ç›¸å¯¹è·¯å¾„çš„é—®é¢˜ã€‚

+ `__dirname` ä¿å­˜å½“å‰è¿è¡Œè„šæœ¬çš„æ‰€åœ¨ç›®å½•ï¼ˆç»å¯¹è·¯å¾„ï¼‰
+ `__filename` ä¿å­˜å½“å‰è¿è¡Œè„šæœ¬çš„æ‰€åœ¨ä½ç½®ï¼ˆç»å¯¹è·¯å¾„ï¼‰

# 3 path

path æ¨¡å—æä¾›äº† æ“ä½œèµ„æºè·¯å¾„ çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä¸‹å‡ ä¸ªè¾ƒä¸ºå¸¸ç”¨çš„å‡ ä¸ª APIï¼š

| API           | è¯´æ˜                                   |
| ------------- | -------------------------------------- |
| path.resolve  | æ ¹æ®å½“å‰ç³»ç»Ÿï¼Œæ‹¼æ¥å‡ºè§„èŒƒçš„ç»å¯¹è·¯å¾„     |
| path.sep      | è·å–å½“å‰æ“ä½œç³»ç»Ÿçš„è·¯å¾„åˆ†éš”ç¬¦           |
| path.parse    | è§£æè·¯å¾„å¹¶è¿”å›æ–‡ä»¶å¯¹è±¡                 |
| path.basename | è·å–æ–‡ä»¶çš„åŸºç¡€åç§°(æ²¡æœ‰è·¯å¾„ï¼ŒåŒ…å«åç¼€) |
| path.dirname  | è·å–æ–‡ä»¶ç›®å½•                           |
| path.ext      | è·å–æ–‡ä»¶åç¼€å                         |

ä»£ç å®ä¾‹ï¼š

```javascript
const path=require('path');
//D:\0\JWork\vscode\nodeJS\src\3-path\index.html\a.txt
console.log(path.resolve(__dirname,'./index.html','a.txt'));//ç›¸å¯¹è·¯å¾„
console.log(path.resolve(__dirname,'index.html','a.txt'));//ç›¸å¯¹è·¯å¾„
//D:\index.html\a.txt åˆ‡è®°ç¬¬ä¸€ä¸ªç»å¯¹è·¯å¾„ä¸ºå‡†ï¼Œåé¢å°±è·Ÿåœ¨åé¢äº†
console.log(path.resolve(__dirname,'/index.html','a.txt'));//ç»å¯¹è·¯å¾„

console.log(`${__dirname}/a.txt`);//æ¨¡ç‰ˆå­—ç¬¦ä¸²ï¼Œåå¼•å·å–å˜é‡å€¼

console.log(path.sep);// \
//{ root: '', dir: '.', base: 'path.js', ext: '.js', name: 'path' }
console.log(path.parse('./path.js'));//è¾“å…¥ä»€ä¹ˆè·¯å¾„ï¼Œå°±è¿”å›ä»€ä¹ˆè·¯å¾„
console.log(path.basename('./path.js'));//path.js
console.log(path.dirname('./path.js'));//.
console.log(path.extname('./path.js'));//.js
```

# 4. http

ä½¿ç”¨Node.jsåˆ›å»ºHTTPæœåŠ¡

```javascript
const http=require('http');

//å½“æ¥æ”¶åˆ°è¯·æ±‚å°±ä¼šæ‰§è¡Œ
//requestæ˜¯nodejså¯¹requestè¿›è¡Œå°è£…ä¸€æ¬¡
//responseå°±æ˜¯å“åº”
let server=http.createServer((request,response)=>{
    //console.log(request);
    response.setHeader('content-type','text/html;charset=utf-8');
    response.end("ä½ å¥½");
});

//ç›‘å¬ç«¯å£ï¼Œå¯åŠ¨æœåŠ¡
server.listen(9000,()=>{
    console.log("httpæœåŠ¡åˆ›å»ºæˆåŠŸï¼");
});
```

> + **http.createServer é‡Œçš„å›è°ƒå‡½æ•°çš„æ‰§è¡Œæ—¶æœºï¼š å½“æ¥æ”¶åˆ° HTTP è¯·æ±‚çš„æ—¶å€™ï¼Œå°±ä¼šæ‰§è¡Œ**
> + **httpæœåŠ¡é»˜è®¤ç«¯å£æ˜¯80ï¼ŒhhtpsæœåŠ¡é»˜è®¤ç«¯å£æ˜¯443**

## 1. Node.jsè·å–è¯·æ±‚æŠ¥æ–‡æ–¹æ³•

| æ–¹æ³•                                                         | å«ä¹‰                               |
| ------------------------------------------------------------ | ---------------------------------- |
| request.method                                               | è¯·æ±‚æ–¹æ³•                           |
| request.httpVersion                                          | è¯·æ±‚ç‰ˆæœ¬                           |
| request.url                                                  | è¯·æ±‚è·¯å¾„ï¼ˆå»æ‰ipå’Œç«¯å£ï¼‰å’Œè¯·æ±‚å‚æ•° |
| require('url').parse(url).pathname                           | ä»…URLè·¯å¾„ä¸åŒ…å«ipå’Œport            |
| require('url').parse(url,true).query                         | URLæŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡        |
| request.headers                                              | è¯·æ±‚å¤´                             |
| request.on('data',function(chunk){})<br />request.on('end',function(){}) | è¯·æ±‚ä½“                             |
| new URL(url,ip)                                              | æ¨èä½¿ç”¨                           |

```javascript
const http=require('http');
const url=require('url');
let server=http.createServer((request,response)=>{
    //if(request.url=='/favicon.ico') console.log(request);
    //console.log(request.method);
    //console.log(request.httpVersion);
    //http://127.0.0.1:9000/?t=1 å°±æ˜¯/?t=1
    //console.log(request.url);//è¯·æ±‚è·¯å¾„å’Œè¯·æ±‚å‚æ•°
    //console.log(request.rawHeaders);

    //è·å–è¯·æ±‚ä½“ï¼Œéœ€è¦requestç»‘å®šon-dataäº‹ä»¶
    let body='';
    request.on('data',chunk=>{
        body += chunk;//ä¼šè‡ªåŠ¨è½¬æ¢
    })
    request.on('end',()=>{
        console.log(body);
    })


    //è·å–æŸ¥è¯¢è·¯å¾„å’Œè¯·æ±‚å‚æ•°ï¼Œå€ŸåŠ©urlæ¨¡å—è¿›è¡Œè§£æ
    //console.log(url.parse(request.url));
    //console.log(url.parse(request.url).pathname);
    //console.log(url.parse(request.url,true).query.t);//è¿”å›è¯·æ±‚å‚æ•°å¯¹è±¡çš„æ–¹å¼

    //è·å–è¯·æ±‚ä¿¡æ¯çš„ç¬¬äºŒä¸­æ–¹å¼ï¼ŒURLæ›´æ–¹ä¾¿
    let urlObj = new URL(request.url,"http://"+request.headers.host);
    console.log(urlObj);
    console.log(urlObj.searchParams.get('t'));//è·å–å‚æ•°ç”¨getæ–¹æ³•
    console.log(urlObj.pathname);
    //è¿”å›
    response.setHeader('content-type','text/html;charset=utf8');
    response.end('æ”¶åˆ°è¯·æ±‚\r\n');
});


server.listen(9000,()=>{
    console.log("httpæœåŠ¡å¯åŠ¨æˆåŠŸ!");
})
```

## 2.Node.jsè·å–å“åº”æŠ¥æ–‡æ–¹æ³•

| ä½œç”¨             | è¯­æ³•                                 |
| ---------------- | ------------------------------------ |
| è®¾ç½®å“åº”çŠ¶æ€ç    | response.statusCode                  |
| è®¾ç½®å“åº”çŠ¶æ€æè¿° | response.statusMessage               |
| è®¾ç½®å“åº”å¤´ä¿¡æ¯   | response.setHeader(key,value)        |
| è®¾ç½®ç›¸åº”ä½“       | response.write()<br />response.end() |

```javascript
const http=require('http');
let server=http.createServer((request,response)=>{
    //å“åº”çŠ¶æ€ç 
    response.statusCode=403;
    //å“åº”çŠ¶æ€ç æè¿°
    response.statusMessage='NOT AUTHORITY';
    response.setHeader('verity','no');
    //è®¾ç½®å¤šä¸ªåŒåçš„å“åº”å¤´ï¼Œç»™æ•°ç»„å³å¯
    response.setHeader('nums',[1,2,3,4,5,6]);

    //è®¾ç½®å“åº”ä½“ä¸¤ä¸ªæ–¹æ³•ï¼šwriteå’Œend
    response.write('g\r\n');
    response.write('o\r\n');
    response.write('o\r\n');
    response.write('d\r\n');
    response.end();//å°±ä¸ä¼ å‚äº†ï¼Œendå¿…é¡»æœ‰è€Œä¸”ä»…æœ‰ä¸€ä¸ª
    //response.end('x');
});

server.listen(9000,()=>{
    console.log('æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼');
})
```

## 3. ç½‘é¡µèµ„æºçš„åŸºæœ¬åŠ è½½è¿‡ç¨‹

å¯ä»¥åœ¨å¼€å‘è€…å·¥å…·ä¸­çœ‹åˆ°

[é¡µé¢åŠ è½½æµç¨‹](https://blog.csdn.net/ABCFF12333/article/details/117771857?spm=1001.2101.3001.6650.13&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EESLANDING%7Edefault-13-117771857-blog-126046478.pc_relevant_landingrelevant&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EESLANDING%7Edefault-13-117771857-blog-126046478.pc_relevant_landingrelevant&utm_relevant_index=17)

<img src='img\nodeJSç¬”è®°\format,png.png'>'

## 4. é™æ€èµ„æºæœåŠ¡

é™æ€èµ„æºæ˜¯æŒ‡ å†…å®¹é•¿æ—¶é—´ä¸å‘ç”Ÿæ”¹å˜çš„èµ„æº ï¼Œä¾‹å¦‚å›¾ç‰‡ï¼Œè§†é¢‘ï¼ŒCSS æ–‡ä»¶ï¼ŒJSæ–‡ä»¶ï¼ŒHTMLæ–‡ä»¶ï¼Œå­—ä½“æ–‡
ä»¶ç­‰
åŠ¨æ€èµ„æºæ˜¯æŒ‡ å†…å®¹ç»å¸¸æ›´æ–°çš„èµ„æº ï¼Œä¾‹å¦‚ç™¾åº¦é¦–é¡µï¼Œç½‘æ˜“é¦–é¡µï¼Œäº¬ä¸œæœç´¢åˆ—è¡¨é¡µé¢ç­‰

### 1. é™æ€èµ„æºç›®å½•

HTTP æœåŠ¡åœ¨å“ªä¸ªæ–‡ä»¶å¤¹ä¸­å¯»æ‰¾é™æ€èµ„æºï¼Œé‚£ä¸ªæ–‡ä»¶å¤¹å°±æ˜¯ é™æ€èµ„æºç›®å½• ï¼Œä¹Ÿç§°ä¹‹ä¸º ç½‘ç«™æ ¹ç›®å½•

### 2. ç½‘é¡µä¸­çš„URL

ç½‘é¡µä¸­çš„URLä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼šç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„

#### 2.1 ç»å¯¹è·¯å¾„

ç»å¯¹è·¯å¾„å¯é æ€§å¼ºï¼Œè€Œä¸”ç›¸å¯¹å®¹æ˜“ç†è§£ï¼Œåœ¨é¡¹ç›®ä¸­è¿ç”¨è¾ƒå¤š

| å½¢å¼                       | ç‰¹ç‚¹                                                         |
| -------------------------- | ------------------------------------------------------------ |
| http://www.atguigu.com/web | ç›´æ¥å‘ç›®æ ‡èµ„æºå‘é€è¯·æ±‚ï¼Œå®¹æ˜“ç†è§£ã€‚ç½‘ç«™çš„å¤–é“¾ä¼šç”¨åˆ°æ­¤å½¢å¼     |
| //atguigu.com/web          | ä¸é¡µé¢ URL çš„åè®®æ‹¼æ¥å½¢æˆå®Œæ•´ URL å†å‘é€è¯·æ±‚ã€‚å¤§å‹ç½‘ç«™ç”¨çš„æ¯”è¾ƒå¤š |
| /web                       | ä¸é¡µé¢ URL çš„åè®®ã€ä¸»æœºåã€ç«¯å£æ‹¼æ¥å½¢æˆå®Œæ•´ URL å†å‘é€è¯·æ±‚ã€‚ä¸­å°å‹ç½‘ç«™ |



#### 2.2 ç›¸å¯¹è·¯å¾„

ç›¸å¯¹è·¯å¾„åœ¨å‘é€è¯·æ±‚æ—¶ï¼Œéœ€è¦ä¸å½“å‰é¡µé¢ URL è·¯å¾„è¿›è¡Œ è®¡ç®— ï¼Œå¾—åˆ°å®Œæ•´ URL åï¼Œå†å‘é€è¯·æ±‚ï¼Œå­¦ä¹ é˜¶
æ®µç”¨çš„è¾ƒå¤š

ä¾‹å¦‚å½“å‰ç½‘é¡µ url ä¸º http://www.atguigu.com/course/h5.html

| å½¢å¼                           | æœ€ç»ˆä¸­çš„url                               |
| ------------------------------ | ----------------------------------------- |
| ./css/app.css                  | http://www.atguigu.com/course/css/app.css |
| js/app.js                      | http://www.atguigu.com/course/js/app.js   |
| ../img/logo.png                | http://www.atguigu.com/img/logo.png       |
| ../../mp4/show.mp4(åˆ°æœ€é¡¶å±‚äº†) | http://www.atguigu.com/mp4/show.mp4       |

# 5. æ¨¡å—åŒ–

## 1. ä»‹ç»

### 1.1 ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–ï¼Ÿ

å°†ä¸€ä¸ªå¤æ‚çš„ç¨‹åºæ–‡ä»¶ä¾æ®ä¸€å®šè§„åˆ™ï¼ˆè§„èŒƒï¼‰æ‹†åˆ†æˆå¤šä¸ªæ–‡ä»¶çš„è¿‡ç¨‹ç§°ä¹‹ä¸º æ¨¡å—åŒ–

å…¶ä¸­æ‹†åˆ†å‡ºçš„ æ¯ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å— ï¼Œæ¨¡å—çš„å†…éƒ¨æ•°æ®æ˜¯ç§æœ‰çš„ï¼Œä¸è¿‡æ¨¡å—å¯ä»¥æš´éœ²å†…éƒ¨æ•°æ®ä»¥ä¾¿å…¶ä»–æ¨¡å—ä½¿ç”¨ã€‚

### 1.2 ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–é¡¹ç›®ï¼Ÿ

ç¼–ç æ—¶æ˜¯æŒ‰ç…§æ¨¡å—ä¸€ä¸ªä¸€ä¸ªç¼–ç çš„ï¼Œ æ•´ä¸ªé¡¹ç›®å°±æ˜¯ä¸€ä¸ªæ¨¡å—åŒ–çš„é¡¹ç›®

### 1.3  æ¨¡å—åŒ–å¥½å¤„

+ é˜²æ­¢å˜é‡åå†²çª
+ é«˜å¤ç”¨æ€§
+ é«˜ç»´æŠ¤æ€§

## 2. æ¨¡å—æš´éœ²æ•°æ®

### 2.1 æ¨¡å—åˆä½“éªŒ

```javascript
//tiemo.js
function tiemo(){
    console.log('åå…ƒä¸€ä¸ªï¼');
}
//å°†æ•°æ®æš´éœ²å‡ºå»
module.exports=tiemo;
```

```javascript
//å¯¼å…¥æ¨¡å—,æ­¤æ—¶å½“å‰tiemoå°±æ˜¯me.jsä¸­tiemoå‡½æ•°
const tiemo = require('./tiemo');//åŠ ä¸åŠ åç¼€éƒ½å¯ä»¥
//ç›´æ¥è°ƒç”¨ï¼Œåˆ«çš„éƒ½æ˜¯objectï¼Œè¿™ä¸ªæ˜¯å‡½æ•°ä¸éœ€è¦ç‚¹
tiemo();
```

### 2.2 æš´éœ²æ•°æ®

+ æš´éœ²å¯¹è±¡  `module.exports = value`

  ```javascript
  //å†™æ³•1.ç›´æ¥æš´éœ²å‡½æ•°  ç›´æ¥è°ƒç”¨ me=requie('./tiemo.js');me();
  module.exports=tiemo;
  //å†™æ³•2.æš´éœ²å¯¹è±¡ï¼Œå¯¹è±¡è°ƒç”¨me=requie('./tiemo.js');me.tiemo();
  module.exports={
      tiemo:tiemo,
      niejiao:niejiao //å¦‚æœæš´éœ²åŒåï¼Œå¯ä»¥ç›´æ¥å†™tiemo,niejiao
  }
  ```

+  æš´éœ²å˜é‡`exports.name = value`

  ```javascript
  //tiemo.js
  exports.tm = tiemo;
  exports.nj = niejiao;
  
  //me.js
  const me = require('./tiemo');
  me.tm();
  me.nj();
  ```

  > ***æ³¨æ„ï¼šmodoules.exportså¯ä»¥æš´éœ²ä»»æ„æ•°æ®***
  >
  > `exports`å…¶å®å°±æ˜¯`modules.exports`ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªç©ºå¯¹è±¡`{}`ï¼Œå³`exports === modules.exports === {}`ã€‚ä½†æ˜¯ç”±äº`require`æ–¹æ³•æ¯æ¬¡è¿”å›éƒ½æ˜¯**`modules.exports`**çš„å€¼ï¼Œæ‰€ä»¥
  >
  > ```javascript
  > exports === module.exports === {}
  > exports.name='zs'; //æ­£ç¡®ï¼Œå°±æ˜¯æƒ³å¯¹è±¡ä¸­æ·»åŠ é”®å€¼å¯¹ï¼ˆå±æ€§ï¼‰
  > module.exports = 'ls' //æ­£ç¡®
  > module.exports = { //æ­£ç¡®
  >     age:13
  > }
  > exports = 'zw';//é”™è¯¯çš„
  > 
  > ```

## 3. ==å¯¼å…¥æ¨¡å—æ³¨æ„äº‹é¡¹==

+ è‡ªå·±å»ºç«‹çš„æ¨¡å—ï¼Œå¯¼å…¥æ—¶å»ºè®®ä½¿ç”¨**ç›¸å¯¹è·¯å¾„**
+ **js**å’Œ**json**æ–‡ä»¶æ–‡ä»¶å¯¼å…¥æ—¶å¯ä»¥ä¸ç”¨å†™åç¼€ï¼Œc/c++ç¼–å†™çš„**node**æ‰©å±•ä¹Ÿå¯ä»¥ä¸å†™åç¼€
+ å¦‚æœå¯¼å…¥å…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼Œä¼šä»¥**js**æ ¼å¼è¿›è¡Œå¤„ç†
+ ***å¦‚æœå¯¼å…¥çš„æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ˆå³é¡¹ç›®æ¨¡å—ï¼‰***
  + å…ˆåˆ¤æ–­è¯¥æ–‡ä»¶å¤¹ä¸‹**æ˜¯å¦å­˜åœ¨package.json**æ–‡ä»¶ä¸”ï¼Œ**æœ‰mainå±æ€§**ï¼Œ**å¹¶ä¸”mainå±æ€§å¯¹åº”çš„æ–‡ä»¶å­˜åœ¨**
  + å¦‚æœå¯¹åº”æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™å¯¼å…¥æˆåŠŸ
  + å¦‚æœmainå±æ€§å¯¹åº”æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™å¯¼å…¥å¤±è´¥ï¼Œå°è¯•ä¸‹ä¸€æ­¥
  + å¦‚æœ**æ²¡æœ‰mainå±æ€§ï¼Œæˆ–è€…package.jsonä¸å­˜åœ¨**
    + å°è¯•å¯¼å…¥**index.js**æ–‡ä»¶ï¼Œå­˜åœ¨å¯¼å…¥æˆåŠŸ
    + å¦‚æœindex.jsä¸å­˜åœ¨ï¼Œå†å¯¼å…¥**index.json**ï¼Œå¦‚æœå­˜åœ¨ï¼Œå¯¼å…¥æˆåŠŸ
    + å¦‚æœindex.jsonä¸å­˜åœ¨ï¼Œåˆ™å¯¼å…¥å¤±è´¥
+ node.jsçš„å†…ç½®æ¨¡å—ï¼Œç›´æ¥å¯¼å…¥å³å¯

## 4. å¯¼å…¥æ¨¡å—æµç¨‹

ä»¥è‡ªå®šä¹‰æ¨¡å—ä¸ºä¾‹ï¼š

+ å°†ç›¸å¯¹è·¯å¾„è½¬åŒ–ä¸ºç»å¯¹è·¯å¾„

+ è¿›è¡Œç¼“å­˜æ£€æµ‹

+ è¯»å–ç›®æ ‡æ–‡ä»¶ä»£ç 

+ å°†æ–‡ä»¶åŒ…è£¹ä¸ºä¸€ä¸ªå‡½æ•°å¹¶æ‰§è¡Œï¼ˆè‡ªæ‰§è¡Œå‡½æ•°ï¼‰ï¼Œé€šè¿‡`arguments.callee.toString()`æŸ¥çœ‹è‡ªæ‰§è¡Œå‡½æ•°

  > ```javascript
  > //ç«‹å³æ‰§è¡Œå‡½æ•°å½¢å¼ 
  > function(arr1,arr2,arr3){
  >     ....
  > }('1','2','3')
  > ```

+ ç¼“å­˜æ¨¡å—çš„å€¼

+ è¿”å›`module.exports`çš„å€¼

<img src='img\nodeJSç¬”è®°\image-20230323162113382.png'>

## 5. CommonJSè§„èŒƒ

module.exports ã€ exports ä»¥åŠ require è¿™äº›éƒ½æ˜¯ CommonJS æ¨¡å—åŒ–è§„èŒƒä¸­çš„å†…å®¹ã€‚
è€Œ Node.js æ˜¯å®ç°äº† CommonJS æ¨¡å—åŒ–è§„èŒƒï¼ŒäºŒè€…å…³ç³»æœ‰ç‚¹åƒ JavaScript ä¸ ECMAScript

# 6. åŒ…ç®¡ç†å·¥å…·

## 1. æ¦‚å¿µä»‹ç»

ã€åŒ…ã€è‹±æ–‡å•è¯æ˜¯ package ï¼Œä»£è¡¨äº†ä¸€ç»„ç‰¹å®šåŠŸèƒ½çš„æºç é›†åˆ

ç®¡ç†ã€åŒ…ã€çš„åº”ç”¨è½¯ä»¶ï¼Œå¯ä»¥å¯¹ã€ŒåŒ…ã€è¿›è¡Œ ä¸‹è½½å®‰è£… ï¼Œ æ›´æ–° ï¼Œ åˆ é™¤ ï¼Œ ä¸Šä¼  ç­‰æ“ä½œ
å€ŸåŠ©åŒ…ç®¡ç†å·¥å…·ï¼Œå¯ä»¥å¿«é€Ÿå¼€å‘é¡¹ç›®ï¼Œæå‡å¼€å‘æ•ˆç‡
åŒ…ç®¡ç†å·¥å…·æ˜¯ä¸€ä¸ªé€šç”¨çš„æ¦‚å¿µï¼Œå¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½æœ‰åŒ…ç®¡ç†å·¥å…·ï¼Œæ‰€ä»¥ æŒæ¡å¥½åŒ…ç®¡ç†å·¥å…·éå¸¸é‡è¦

## 2. npm

npm å…¨ç§° Node Package Manager ï¼Œç¿»è¯‘ä¸ºä¸­æ–‡æ„æ€æ˜¯ã€Node çš„åŒ…ç®¡ç†å·¥å…·ã€
npm æ˜¯ node.js å®˜æ–¹å†…ç½®çš„åŒ…ç®¡ç†å·¥å…·ï¼Œæ˜¯ å¿…é¡»è¦æŒæ¡ä½çš„å·¥å…·

node.js åœ¨å®‰è£…æ—¶ä¼š è‡ªåŠ¨å®‰è£… npm ï¼Œæ‰€ä»¥å¦‚æœä½ å·²ç»å®‰è£…äº† node.jsï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ npm
å¯ä»¥é€šè¿‡ npm -v æŸ¥çœ‹ç‰ˆæœ¬å·æµ‹è¯•ï¼Œå¦‚æœæ˜¾ç¤ºç‰ˆæœ¬å·è¯´æ˜å®‰è£…æˆåŠŸï¼Œåä¹‹å®‰è£…å¤±è´¥

### 1. npmçš„åŸºæœ¬ä½¿ç”¨

#### 1.1 åˆå§‹åŒ–

```javascript
/*
	1.åˆå§‹åŒ–åŒ…
		è¾“å…¥åŒ…çš„åå­—
		è¾“å…¥ç‰ˆæœ¬
		è¾“å…¥åŒ…çš„æè¿°
		è¾“å…¥entry pointæ–‡ä»¶ï¼šï¼ˆé»˜è®¤æ˜¯index.jsï¼‰
		è¾“å…¥test command
		è¾“å…¥git ä»“åº“åœ°å€	
		è¾“å…¥å…³é”®å­—ï¼ˆä¾¿äºæ£€ç´¢ï¼‰
		è¾“å…¥ä½œè€…
		è¾“å…¥å¼€æºè¯ä¹¦
		yes
		åˆ›å»ºpackage.json æ–‡ä»¶ï¼ˆpackage.json æ˜¯åŒ…çš„é…ç½®æ–‡ä»¶ï¼Œæ¯ä¸ªåŒ…éƒ½å¿…é¡»è¦æœ‰ package.jsonï¼‰
		*/
npm init
```

> **åˆå§‹åŒ–çš„è¿‡ç¨‹ä¸­è¿˜æœ‰ä¸€äº›æ³¨æ„äº‹é¡¹**ï¼š
>
> 1. package name ( åŒ…å ) **ä¸èƒ½ä½¿ç”¨ä¸­æ–‡ã€å¤§å†™**ï¼Œ**é»˜è®¤å€¼æ˜¯ æ–‡ä»¶å¤¹çš„åç§° **ï¼Œæ‰€ä»¥æ–‡ä»¶å¤¹åç§°ä¹Ÿä¸
> èƒ½ä½¿ç”¨ä¸­æ–‡å’Œå¤§å†™
> 2. version ( ç‰ˆæœ¬å· )è¦æ±‚ x.x.x çš„å½¢å¼å®šä¹‰ï¼Œ x å¿…é¡»æ˜¯æ•°å­—ï¼Œé»˜è®¤å€¼æ˜¯ 1.0.0
> 3. ISC è¯ä¹¦ä¸ MIT è¯ä¹¦åŠŸèƒ½ä¸Šæ˜¯ç›¸åŒçš„ï¼Œå…³äºå¼€æºè¯ä¹¦æ‰©å±•é˜…è¯» http://www.ruanyifeng.com/bl
> og/2011/05/how_to_choose_free_software_licenses.html
> 4. package.json å¯ä»¥æ‰‹åŠ¨åˆ›å»ºä¸ä¿®æ”¹
> 5. ä½¿ç”¨ npm init -y æˆ–è€… npm init --yes æé€Ÿåˆ›å»º package.json

#### 1.2 æœç´¢åŒ…

æœç´¢åŒ…çš„æ–¹å¼æœ‰ä¸¤ç§

+ å‘½ä»¤è¡Œ ã€npm s/search å…³é”®å­—ã€

  ```bash
  npm s å…³é”®å­—
  ```

+ ç½‘ç«™æœç´¢ ç½‘å€æ˜¯ https://www.npmjs.com/

#### 1.3 ä¸‹è½½å®‰è£…åŒ…

```bash
# æ ¼å¼
npm install/i <åŒ…å> # åŒ…åˆå§‹åŒ–ä¹‹å
```

å®‰è£…ä¹‹åæ–‡ä»¶å¤¹ä¸‹ä¼šå¢åŠ ä¸¤ä¸ªèµ„æº

+ `node_modules` æ–‡ä»¶å¤¹ å­˜æ”¾ä¸‹è½½çš„åŒ…
+ `package-lock.json` åŒ…çš„é”æ–‡ä»¶ ï¼Œç”¨æ¥é”å®šåŒ…çš„ç‰ˆæœ¬åŠä¾èµ–ä¿¡æ¯

> å®‰è£… uniq ä¹‹åï¼Œ uniq å°±æ˜¯å½“å‰è¿™ä¸ªåŒ…çš„ä¸€ä¸ª ä¾èµ–åŒ… ï¼Œæœ‰æ—¶ä¼šç®€ç§°ä¸º ä¾èµ–
> æ¯”å¦‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåŒ…åå­—ä¸º Aï¼ŒA ä¸­å®‰è£…äº†åŒ…åå­—æ˜¯ Bï¼Œæˆ‘ä»¬å°±è¯´ B æ˜¯ A çš„ä¸€ä¸ªä¾èµ–åŒ… ï¼Œä¹Ÿä¼šè¯´
> A ä¾èµ– B

#### 1.4 requireå¯¼å…¥npmåŒ…
+ å…ˆåœ¨**å½“å‰è¿è¡Œè„šæœ¬æ‰€åœ¨çš„æ–‡ä»¶å¤¹ä¸‹node_modulesä¸­å¯»æ‰¾åŒåçš„æ–‡ä»¶å¤¹ï¼ˆåŒ…åï¼‰**ï¼Œæ‰¾åˆ°äº†ç»“æŸã€‚
+ å¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±å»**ä¸Šçº§ç›®å½•ä¸­ï¼Œæ‰¾node_modulesä¸‹çš„åŒåæ–‡ä»¶å¤¹ï¼ˆåŒ…åï¼‰**ï¼Œç›´åˆ°æ‰¾åˆ°ç£ç›˜æ ¹ç›®å½•ä¸ºæ­¢ã€‚


### 2. ç”Ÿäº§ä¾èµ–ä¸å¼€å‘ä¾èµ–
ç”Ÿäº§ä¾èµ–ï¼šå¼€å‘æ˜¯éœ€è¦çš„ï¼Œéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¾æ—§éœ€è¦çš„ï¼ˆpackage.jsonä¸‹çš„dependenciesä¸‹ï¼‰

å¼€å‘ä¾èµ–ï¼šåªåœ¨å¼€å‘æ—¶éœ€è¦çš„ï¼Œç”Ÿäº§ä¸Šä¸éœ€è¦ï¼ˆpackage.jsonä¸‹çš„devDependenciesä¸‹ï¼‰

| ç±»å‹     | å‘½ä»¤                                     | è¡¥å……                                                         |
| -------- | ---------------------------------------- | ------------------------------------------------------------ |
| ç”Ÿäº§ä¾èµ– | `npm i -S åŒ…`<br />`npm i --save åŒ…`     | -S ç­‰æ•ˆäº --saveï¼Œ -S æ˜¯é»˜è®¤é€‰é¡¹<br/>åŒ…ä¿¡æ¯ä¿å­˜åœ¨ `package.json ä¸­ dependencies` å±æ€§ |
| å¼€å‘ä¾èµ– | `npm i -D åŒ…`<br />`npm i --save-dev åŒ…` | -D ç­‰æ•ˆäº --save-dev<br/>åŒ…ä¿¡æ¯ä¿å­˜åœ¨ `package.json ä¸­ devDependencies `å±æ€§ |

> ä¸¾ä¸ªä¾‹å­æ–¹ä¾¿å¤§å®¶ç†è§£ï¼Œæ¯”å¦‚è¯´åšè›‹ç‚’é¥­éœ€è¦ å¤§ç±³ ï¼Œ æ²¹ ï¼Œ è‘± ï¼Œ é¸¡è›‹ ï¼Œ é”… ï¼Œ ç…¤æ°” ï¼Œ é“²å­ ç­‰
> å…¶ä¸­ é”… ï¼Œ ç…¤æ°” ï¼Œ é“²å­ å±äºå¼€å‘ä¾èµ–ï¼Œåªåœ¨åˆ¶ä½œé˜¶æ®µä½¿ç”¨
> è€Œ å¤§ç±³ ï¼Œ æ²¹ ï¼Œ è‘± ï¼Œ é¸¡è›‹ å±äºç”Ÿäº§ä¾èµ–ï¼Œåœ¨åˆ¶ä½œä¸æœ€ç»ˆé£Ÿç”¨éƒ½ä¼šç”¨åˆ°
> æ‰€ä»¥ å¼€å‘ä¾èµ– æ˜¯åªåœ¨å¼€å‘é˜¶æ®µä½¿ç”¨çš„ä¾èµ–åŒ…ï¼Œè€Œ ç”Ÿäº§ä¾èµ– æ˜¯å¼€å‘é˜¶æ®µå’Œæœ€ç»ˆä¸Šçº¿è¿è¡Œé˜¶æ®µéƒ½ç”¨åˆ°
> çš„ä¾èµ–åŒ…
å‰é¢ä½¿ç”¨**`npm i åŒ…å`**é»˜è®¤å°†ä¾èµ–åŒ…å®‰è£…åˆ°å½“å‰ç›®å½•ä¸‹ï¼Œåˆ°å…¶ä»–ç›®å½•å°±æ²¡åŠæ³•ä½¿ç”¨è¿™ä¸ªä¾èµ–äº†ã€‚

### 3. å…¨å±€å®‰è£…

å…¨å±€å®‰è£…å°±ç›¸å½“äºæŠŠåŒ…å®‰è£…åˆ°nodejsçš„å†…ç½®æ¨¡å—ç›®å½•ä¸‹ï¼Œè¿™æ ·æ— è®ºåœ¨å“ªä¸ªç›®å½•ä¸­æ‰“å¼€ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ã€‚

```bash
# å…¨å±€å®‰è£…åå°±å¯ä»¥åœ¨å‘½ä»¤è¡Œçš„ä»»ä½•ä½ç½®ä½¿ç”¨å®‰è£…åŒ…
npm i -g åŒ…å
```

> è¯´æ˜ï¼š
>
> + **å…¨å±€å®‰è£…çš„å‘½ä»¤ä¸å—å·¥ä½œç›®å½•ä½ç½®å½±å“**
> + å¯ä»¥é€šè¿‡ **`npm root -g`** å¯ä»¥æŸ¥çœ‹å…¨å±€å®‰è£…åŒ…çš„ä½ç½®
> + ä¸æ˜¯æ‰€æœ‰çš„åŒ…éƒ½é€‚åˆå…¨å±€å®‰è£… ï¼Œ åªæœ‰å…¨å±€ç±»çš„å·¥å…·æ‰é€‚åˆï¼Œå¯ä»¥é€šè¿‡ æŸ¥çœ‹åŒ…çš„å®˜æ–¹æ–‡æ¡£æ¥ç¡®å®š
>   å®‰è£…æ–¹å¼ ï¼Œè¿™é‡Œå…ˆä¸å¿…å¤ªçº ç»“

### 4. å¸¸ç”¨å‘½ä»¤

```bash
# å®‰è£…æŒ‡å®šç‰ˆæœ¬åŒ…
npm i jquery@1.7.1
npm install jquery@1.7.1

# åˆ é™¤å±€éƒ¨ï¼ˆå½“å‰é¡¹ç›®ï¼‰åŒ…
npm remove åŒ…å
npm r åŒ…å

# åˆ é™¤å…¨å±€ï¼ˆæ‰€æœ‰ï¼‰åŒ…
npm remove -g åŒ…å

```

### 5. å®‰è£…å…¨éƒ¨ä¾èµ–

```bash
# æ²¡æœ‰ä»»ä½•å‚æ•°ï¼Œä¼šæ ¹æ®å½“å‰é¡¹ç›®çš„package.jsonå’Œpackage-lock.jsonä¸­çš„ä¾èµ–å£°æ˜ï¼Œå…¨éƒ¨å®‰è£…
npm i 
```

> å› ä¸ºæœ€åé¡¹ç›®æ‰“åŒ…node_modules æ–‡ä»¶å¤¹å¤§å¤šæ•°æƒ…å†µéƒ½ä¸ä¼šå­˜å…¥ç‰ˆæœ¬åº“

### 6. npmé…ç½®å‘½ä»¤åˆ«å

æ¯”å¦‚ä¹‹å‰çš„æœåŠ¡æ‰§è¡Œå‘½ä»¤éœ€è¦`node server.js`ï¼Œé€šè¿‡é…ç½®å½“å‰é¡¹ç›®ä¸‹`package.json`æ–‡ä»¶ä¸­çš„`scripts`å±æ€§æ¥å®ç°åˆ«åè¿è¡Œï¼š

```json
//package.json
{
  "name": "test",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "server": "node server.js --open --entry ..", //é…ç½®çš„åˆ«å
    "start": "node server.js --open --entry .."
  },
  "author": "",
  "license": "ISC"
}
```

```bash
# å¯åŠ¨å‘½ä»¤,å°±ä¼šåœ¨å½“å‰é¡¹ç›®ä¸‹æ‰¾package.jsonä¸­scriptså¯¹è±¡çš„ serverå±æ€§
npm run server 
# startæ¯”è¾ƒç‰¹æ®Šï¼Œå¯ä»¥ä¸ç”¨runï¼Œå½“ç„¶åŠ runä¹Ÿä¸é”™
npm satrt
```

> è¡¥å……è¯´æ˜ï¼š
>
> + `npm start`æ˜¯é¡¹ç›®ä¸­å¸¸ç”¨çš„ä¸€ä¸ªå‘½ä»¤ï¼Œä¸€èˆ¬ç”¨æ¥å¯åŠ¨é¡¹ç›®
> + **`npm run` æœ‰è‡ªåŠ¨å‘ä¸Šçº§ç›®å½•æŸ¥æ‰¾çš„ç‰¹æ€§ï¼Œè·Ÿ require å‡½æ•°ä¹Ÿä¸€æ ·**
> + å¯¹äºé™Œç”Ÿçš„é¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥çœ‹ scripts å±æ€§æ¥å‚è€ƒé¡¹ç›®çš„ä¸€äº›æ“ä½œ

### 7. npmé…ç½®æ·˜å®é•œåƒæº

#### 7.1 ç›´æ¥é…ç½®

```bash
npm config set registry https://registry.npmmirror.com/

# æ£€æŸ¥æ˜¯å¦é…ç½®æˆåŠŸ 
npm config list #æ£€æŸ¥ registry åœ°å€æ˜¯å¦ä¸º https://registry.npmmirror.com/ , å¦‚æœ æ˜¯ åˆ™è¡¨æ˜æˆåŠŸ
```

#### 7.2 å·¥å…·é…ç½® 

ä½¿ç”¨`nrm`é…ç½®npmçš„é•œåƒåœ°å€`npm registry manager`ã€æ¨èä½¿ç”¨ï¼Œåé¢ä¿®æ”¹èµ·æ¥æ–¹ä¾¿ã€‘

```bash
# 1ã€å®‰è£…nrm
npm i -g nrm@1.1.0#nodeç‰ˆæœ¬ä½ï¼Œè£…ä¸äº†é«˜çš„
# 2ã€ä¿®æ”¹é•œåƒ
nrm use taobao
# 3ã€æ£€æŸ¥æ˜¯å¦é…ç½®æˆåŠŸ 
npm config list #æ£€æŸ¥ registry åœ°å€æ˜¯å¦ä¸º https://registry.npmmirror.com/ , å¦‚æœ æ˜¯ åˆ™è¡¨æ˜æˆåŠŸ
```



## 3. cnpm

### 1. ä»‹ç»

cnpm æ˜¯ä¸€ä¸ªæ·˜å®æ„å»ºçš„ `npmjs.com `çš„å®Œæ•´é•œåƒï¼Œä¹Ÿç§°ä¸ºã€æ·˜å®é•œåƒã€ï¼Œç½‘å€` https://npmmirror.com/`
cnpm æœåŠ¡éƒ¨ç½²åœ¨å›½å†… é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸Š ï¼Œ å¯ä»¥æé«˜åŒ…çš„ä¸‹è½½é€Ÿåº¦
å®˜æ–¹ä¹Ÿæä¾›äº†ä¸€ä¸ªå…¨å±€å·¥å…·åŒ… `cnpm` ï¼Œæ“ä½œå‘½ä»¤ä¸ npm å¤§ä½“ç›¸åŒ

### 2.  å®‰è£…

```bash
npm install -g cnpm --registry=https://registry.npmmirror.com
```

### 3. æ“ä½œå‘½ä»¤

| åŠŸèƒ½         | å‘½ä»¤                                                         |
| ------------ | ------------------------------------------------------------ |
| åˆå§‹åŒ–       | `cnpm init`                                                  |
| å®‰è£…åŒ…       | `cnpm i åŒ…`<br />`cnpm i -S åŒ…`ï¼ˆç”Ÿäº§ä¾èµ–ï¼‰<br />`cnpm i -D åŒ…`ï¼ˆå¼€å‘ä¾èµ–ï¼‰<br />`cnpm i-g åŒ…` |
| å®‰è£…é¡¹ç›®ä¾èµ– | `cnpm i`                                                     |
| åˆ é™¤         | `cnpm -r`                                                    |



## 4. yarn

### 1. ä»‹ç»

yarn æ˜¯ç”± Facebook åœ¨ 2016 å¹´æ¨å‡ºçš„æ–°çš„ Javascript åŒ…ç®¡ç†å·¥å…·ï¼Œå®˜æ–¹ç½‘å€ï¼š https://yarnpkg.com/

### 2. yarnç‰¹ç‚¹

+ é€Ÿåº¦è¶…å¿«ï¼šyarn ç¼“å­˜äº†æ¯ä¸ªä¸‹è½½è¿‡çš„åŒ…ï¼Œæ‰€ä»¥å†æ¬¡ä½¿ç”¨æ—¶æ— éœ€é‡å¤ä¸‹è½½ã€‚ åŒæ—¶åˆ©ç”¨å¹¶è¡Œä¸‹è½½ä»¥æœ€å¤§
+ åŒ–èµ„æºåˆ©ç”¨ç‡ï¼Œå› æ­¤å®‰è£…é€Ÿåº¦æ›´å¿«
+ è¶…çº§å®‰å…¨ï¼šåœ¨æ‰§è¡Œä»£ç ä¹‹å‰ï¼Œyarn ä¼šé€šè¿‡ç®—æ³•æ ¡éªŒæ¯ä¸ªå®‰è£…åŒ…çš„å®Œæ•´æ€§
+ è¶…çº§å¯é ï¼šä½¿ç”¨è¯¦ç»†ã€ç®€æ´çš„é”æ–‡ä»¶æ ¼å¼å’Œæ˜ç¡®çš„å®‰è£…ç®—æ³•ï¼Œyarn èƒ½å¤Ÿä¿è¯åœ¨ä¸åŒç³»ç»Ÿä¸Šæ— å·®å¼‚çš„
  å·¥ä½œ

### 3. yarnå®‰è£…

```bash
npm r -g yarn
```

### 4. yarnå¸¸ç”¨å‘½ä»¤

| åŠŸèƒ½               | å‘½ä»¤                                                         |
| ------------------ | ------------------------------------------------------------ |
| åˆå§‹åŒ–             | `yarn init`<br />`yarn init -y`                              |
| å®‰è£…åŒ…             | ç”Ÿäº§ä¾èµ–ï¼š`yarn add åŒ…`<br />å¼€å‘ä¾èµ–ï¼š`yarn add åŒ… --dev`<br />å…¨å±€å®‰è£…ï¼š`yarn global add åŒ…` |
| åˆ é™¤åŒ…             | å±€éƒ¨åˆ é™¤ï¼š`yarn remove åŒ…`<br />å…¨å±€åˆ é™¤ï¼š`yarn global remove åŒ…` |
| å®‰è£…é¡¹ç›®ä¸‹æ‰€æœ‰ä¾èµ– | `yarn`(yarné¡¹ç›®ä¸‹ï¼Œä¸¤ä¸ªjsonæ–‡ä»¶ä¾èµ–)                         |
| è¿è¡Œå‘½ä»¤åˆ«å       | yarn åˆ«å ï¼ˆä¸éœ€è¦åŠ runï¼‰                                    |

> **æ³¨æ„ï¼š**
>
> `é€šè¿‡yarn global add åŒ…`æœ‰æ—¶ä¼šä¸å¥½ä½¿ï¼Œè¿™æ˜¯å› ä¸ºå…¨å±€å®‰è£…çš„åŒ…æ²¡æœ‰æ”¾åœ¨ç¯å¢ƒå˜é‡pathä¸­ã€‚
>
> ```bash
> # æŸ¥çœ‹yarnå…¨å±€å®‰è£…åŒ…çš„å®é™…åœ°å€
> yarn global bin 
> # å°†åœ°å€æ”¾åœ¨ç¯å¢ƒå˜é‡ pathä¸­
> ```

### 5. yarné…ç½®æ·˜å®é•œåƒ

```bash
yarn config set registry https://registry.npmmirror.com/

# æŸ¥çœ‹yarné…ç½®é¡¹
yarn config lsit
```

### 6. npmå’Œyarnçš„é€‰æ‹©

å¤§å®¶å¯ä»¥æ ¹æ®ä¸åŒçš„åœºæ™¯è¿›è¡Œé€‰æ‹©
1. ä¸ªäººé¡¹ç›®
  å¦‚æœæ˜¯ä¸ªäººé¡¹ç›®ï¼Œ å“ªä¸ªå·¥å…·éƒ½å¯ä»¥ ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½æ¥é€‰æ‹©
2. å…¬å¸é¡¹ç›®
  å¦‚æœæ˜¯å…¬å¸è¦æ ¹æ®é¡¹ç›®ä»£ç æ¥é€‰æ‹©ï¼Œå¯ä»¥ é€šè¿‡é”æ–‡ä»¶åˆ¤æ–­ é¡¹ç›®çš„åŒ…ç®¡ç†å·¥å…·
  + npm çš„é”æ–‡ä»¶ä¸º package-lock.json
  + yarn çš„é”æ–‡ä»¶ä¸º yarn.lock

> åŒ…ç®¡ç†å·¥å…· ä¸è¦æ··ç€ç”¨ï¼Œåˆ‡è®°ï¼Œåˆ‡è®°ï¼Œåˆ‡è®°

## 5. ç®¡ç†å‘å¸ƒåŒ…

### 1. åˆ›å»ºå’Œå‘å¸ƒåŒ…

æˆ‘ä»¬å¯ä»¥å°†è‡ªå·±å¼€å‘çš„å·¥å…·åŒ…å‘å¸ƒåˆ° npm æœåŠ¡ä¸Šï¼Œæ–¹ä¾¿è‡ªå·±å’Œå…¶ä»–å¼€å‘è€…ä½¿ç”¨ï¼Œæ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š
1. åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œå¹¶åˆ›å»ºæ–‡ä»¶ index.jsï¼Œ åœ¨æ–‡ä»¶ä¸­å£°æ˜å‡½æ•°ï¼Œä½¿ç”¨ module.exports æš´éœ²
2. npm åˆå§‹åŒ–å·¥å…·åŒ…ï¼Œpackage.json å¡«å†™åŒ…çš„ä¿¡æ¯ (åŒ…çš„åå­—æ˜¯å”¯ä¸€çš„)
3. æ³¨å†Œè´¦å· https://www.npmjs.com/signup
4. æ¿€æ´»è´¦å· ï¼ˆ ä¸€å®šè¦æ¿€æ´»è´¦å· ï¼‰
5. ä¿®æ”¹ä¸ºå®˜æ–¹çš„å®˜æ–¹é•œåƒ (å‘½ä»¤è¡Œä¸­è¿è¡Œ `nrm use npm` )
6. å‘½ä»¤è¡Œä¸‹ `npm login` å¡«å†™ç›¸å…³ç”¨æˆ·ä¿¡æ¯
7. å‘½ä»¤è¡Œä¸‹ `npm publish` æäº¤åŒ… ğŸ‘Œ

### 2.  æ›´æ–°åŒ…

åç»­å¯ä»¥å¯¹è‡ªå·±å‘å¸ƒçš„åŒ…è¿›è¡Œæ›´æ–°ï¼Œæ“ä½œæ­¥éª¤å¦‚ä¸‹
1. æ›´æ–°åŒ…ä¸­çš„ä»£ç 
2. æµ‹è¯•ä»£ç æ˜¯å¦å¯ç”¨
3. ä¿®æ”¹ package.json ä¸­çš„ç‰ˆæœ¬å·
4. å‘å¸ƒæ›´æ–° `npm publish`

### 3. åˆ é™¤åŒ…

æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆ é™¤åŒ… `npm unpublish --force`

> åˆ é™¤åŒ…éœ€è¦æ»¡è¶³ä¸€å®šçš„æ¡ä»¶ï¼Œ https://docs.npmjs.com/policies/unpublish
> ä½ æ˜¯åŒ…çš„ä½œè€…
> å‘å¸ƒå°äº 24 å°æ—¶
> å¤§äº 24 å°æ—¶åï¼Œæ²¡æœ‰å…¶ä»–åŒ…ä¾èµ–ï¼Œå¹¶ä¸”æ¯å‘¨å°äº 300 ä¸‹è½½é‡ï¼Œå¹¶ä¸”åªæœ‰ä¸€ä¸ªç»´æŠ¤è€…

## 6.  æ‰©å±•å†…å®¹

<img src='img\nodeJSç¬”è®°\image-20230324111019453.png'>

# 7. nvm

nvm å…¨ç§° Node Version Manager é¡¾åæ€ä¹‰å®ƒæ˜¯ç”¨æ¥ç®¡ç† node ç‰ˆæœ¬çš„å·¥å…·ï¼Œæ–¹ä¾¿åˆ‡æ¢ä¸åŒç‰ˆæœ¬çš„
Node.js

nvm çš„ä½¿ç”¨éå¸¸çš„ç®€å•ï¼Œè·Ÿ npm çš„ä½¿ç”¨æ–¹æ³•ç±»ä¼¼

## 7.1 å®‰è£…

é¦–å…ˆå…ˆä¸‹è½½ nvmï¼Œä¸‹è½½åœ°å€ https://github.com/coreybutler/nvm-windows/releases ï¼Œ
é€‰æ‹© nvm-setup.exe ä¸‹è½½å³å¯

## 7.2 å‘½ä»¤

| å‘½ä»¤                     | è¯´æ˜                            |
| ------------------------ | ------------------------------- |
| `nvm list available`     | æ˜¾ç¤ºæ‰€æœ‰å¯ä»¥ä¸‹è½½çš„ Node.js ç‰ˆæœ¬ |
| `nvm list`               | æ˜¾ç¤ºå·²å®‰è£…çš„ç‰ˆæœ¬                |
| `nvm install 18.12.1`    | å®‰è£… 18.12.1 ç‰ˆæœ¬çš„ Node.js     |
| `nvm install latest`     | å®‰è£…æœ€æ–°ç‰ˆçš„ Node.js            |
| `nvm  uninstall 18.12.1` | åˆ é™¤æŸä¸ªç‰ˆæœ¬çš„ Node.js          |
| `nvm use 18.12.1`        | åˆ‡æ¢ 18.12.1 çš„ Node.js         |







































































































